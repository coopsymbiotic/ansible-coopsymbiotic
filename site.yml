---
- hosts: servers
  sudo: yes
  roles:
    - common-all
    - icinga2
    - logcheck
    - filebeat
  tags:
    - base

- hosts: symbiotic-servers
  sudo: yes
  roles:
    - sshuserkeys
  tags:
    - sshuserkeys

- hosts: kvm-servers
  sudo: yes
  roles:
    - kvm-server
  tags:
    - kvm-server

- hosts: aegir-managed
  sudo: yes
  roles:
    - aegir
    - backupninja-rdiff
    - postfix
    - ufw
  tags:
    - aegir

- hosts: postfix-servers
  sudo: yes
  roles:
    - postfix
  tags:
    - postfix

- hosts: sslcerts
  sudo: yes
  roles:
    - sslcerts
  tags:
    - sslcerts
    - sslcertificates

- hosts: aegir-managed
  sudo: yes
  roles:
    - civicrm-environment
  tags:
    - civicrm-environment

- hosts: backup-servers
  sudo: yes
  roles:
    - backupserver
  tags:
    - backupserver

- hosts: logstash-servers
  sudo: yes
  roles:
    - logstash
  tags:
    - logstash

- hosts: icinga-servers
  sudo: yes
  roles:
    - icinga2
  tags:
    - icinga
    - icinga2

- hosts: servers
  sudo: yes
  roles:
    - icinga2
  tags:
    - icinga2

- hosts: redmine-servers
  sudo: yes
  roles:
    - redmine
  tags:
    - redmine

- hosts: gitlab-servers
  sudo: yes
  roles:
    - gitlab
  tags:
    - gitlab

- hosts: yubiauth-managed
  sudo: yes
  roles:
    - yubiauth
  tags:
    - yubiauth

- hosts: rdiff-backups
  sudo: yes
  roles:
    - backupninja-rdiff
  tags:
    - backupninja-rdiff

- hosts: openwrt-mesh-nodes
  sudo: yes
  gather_facts: no
  roles:
    - openwrt-babelmesh
  tags:
    - openwrt-babelmesh

- hosts: munin-nodes
  sudo: yes
  roles:
    - munin-node
  tags:
    - munin-node

- hosts: dokuwiki-instances
  sudo: yes
  roles:
    - dokuwiki
  tags:
    - dokuwiki

- hosts: ufw-managed
  sudo: yes
  roles:
    - ufw
  tags:
    - ufw

# For hosts not running Aegir
# or with more custom setups
- hosts: dehydrated-manually
  sudo: yes
  roles:
    - dehydrated
  tags:
    - dehydrated

- hosts: docker-servers
  sudo: yes
  roles:
    - docker
  tags:
    - docker
